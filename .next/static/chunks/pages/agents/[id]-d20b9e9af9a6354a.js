(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{8379:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agents/[id]",function(){return s(1080)}])},1523:function(e,t,s){"use strict";var r=s(5893),l=s(1163);let o=e=>{let{data:{id:t,name:s,address:o,price:d,description:a,bathrooms:n,bedrooms:i}}=e,c=(0,l.useRouter)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"h-96 my-12 mx-12 shadow-lg rounded-md grid grid-rows-2",onClick:()=>c.push("/listings/".concat(t)),children:[(0,r.jsx)("div",{className:"w-full h-full relative rounded-t-md bg-pink-200",children:(0,r.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:o})}),(0,r.jsxs)("div",{className:"w-full h-full flex flex-col mx-4 my-4 space-y-4 text-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["RM",d]}),(0,r.jsx)("div",{children:s}),(0,r.jsx)("div",{className:"w-[250px]",children:(0,r.jsx)("div",{className:"truncate",children:a})}),(0,r.jsxs)("div",{className:"flex flex-row space-x-10",children:[(0,r.jsxs)("div",{children:["\uD83D\uDEC1 ",n]}),(0,r.jsxs)("div",{children:["\uD83D\uDECFï¸ ",i]})]})]})]})})};t.Z=o},1080:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(5893),l=s(8794),o=s(5838),d=s(9008),a=s.n(d),n=s(1163),i=s(7294),c=s(9734),m=s(4205),u=s(1523),x=s(2175),p=s(1649),h=s(4231);let f=h.Ry().shape({matterportId:h.Z_().typeError("String is required").required("Required").min(5,"Too Short!").trim(),name:h.Z_().typeError("String is required").required("Required").min(5,"Too Short!").trim(),description:h.Z_().typeError("String is required").required("Required").min(10,"Too Short!").trim(),address:h.Z_().typeError("String is required").required("Required").min(10,"Too Short!").trim(),bathrooms:h.Rx().typeError("Must be a positive number").required("Required").moreThan(0),bedrooms:h.Rx().typeError("Must be a positive number").required("Required").moreThan(0),price:h.Rx().typeError("Must be a positive number").required("Required").moreThan(0)}),y=e=>{let{addListing:t}=e;(0,n.useRouter)();let[s,l]=(0,i.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"z-50 w-full h-full px-4 py-4 pointer-events-none fixed top-0 flex justify-end items-end",children:(0,r.jsx)(p.S$f,{className:"w-20 h-20 pointer-events-auto",onClick:()=>l(!0)})}),s&&(0,r.jsx)("div",{className:"w-full h-full fixed backdrop-blur-sm shadow-lg z-50 top-0 flex flex-col items-center justify-center",children:(0,r.jsx)("div",{className:"max-md:w-full md:w-3/6 bg-white shadow-2xl px-4 py-4 space-y-4 rounded-md overflow-auto",children:(0,r.jsx)(x.J9,{initialValues:{matterportId:"",name:"",address:"",description:"",bathrooms:"",bedrooms:"",price:""},validationSchema:f,onSubmit:e=>{t(e),l(!1)},children:e=>{let{isSubmitting:t}=e;return(0,r.jsxs)(x.l0,{className:"w-full space-y-4",children:[(0,r.jsx)(x.gN,{type:"text",name:"matterportId",placeholder:"Matterport Model ID",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"matterportId",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)(x.gN,{type:"text",name:"name",placeholder:"Name of listing",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"name",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)(x.gN,{type:"text",name:"address",placeholder:"Address",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"address",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)(x.gN,{type:"text",name:"description",placeholder:"Description",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"description",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)(x.gN,{type:"text",name:"bathrooms",placeholder:"How many bathrooms?",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"bathrooms",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)(x.gN,{type:"text",name:"bedrooms",placeholder:"How many bedrooms?",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"bedrooms",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)(x.gN,{type:"text",name:"price",placeholder:"Price",className:"relative block max-md:py-4 w-full placeholder:text-slate-400 bg-white border border-slate-300 rounded-lg py-4 pl-4 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm md:text-xl"}),(0,r.jsx)(x.Bc,{name:"price",component:"div",className:"text-red-500 sm:text-sm md:text-xl"}),(0,r.jsx)("button",{className:"w-full py-4 bg-pink-650 rounded-lg text-center text-xl text-white",type:"submit",disabled:t,children:"Create"}),(0,r.jsx)("button",{type:"button",className:"w-full py-4 bg-white rounded-lg text-center text-xl text-gray-500 border border-gray-400",onClick:()=>l(!1),children:"Cancel"})]})}})})})]})};function g(){var e,t,s,d;let[x,p]=(0,i.useState)(!1),[{searchVal:h},f]=(0,l.K1)(),g=(0,n.useRouter)(),{id:b}=g.query,{data:w,error:v,mutate:j}=(0,c.ZP)(b?"/api/agents/".concat(b):null,b?m._:null),N="application/json";(0,i.useEffect)(()=>{(0,o.L2)("proptory-token")&&(0,o.L2)("proptory-user")&&p(!0)},[x]);let k=async e=>{try{let t=await fetch("/api/agents/".concat((0,o.L2)("proptory-user")),{method:"POST",headers:{Accept:N,"Content-Type":N,Authorization:"Bearer ".concat((0,o.L2)("proptory-token"))},body:JSON.stringify({...e})}),s=await t.json();if(!t.ok)throw Error(s.error);w&&j({...w,data:{...w.data,listings:[...null==w?void 0:w.data.listings,s]}}),f((0,l.sc)({message:"Successfully added ".concat(e.name),type:"success"}))}catch(e){f((0,l.sc)({message:"Failed to add",type:"error"}))}};return v?(0,r.jsx)("p",{children:"Failed to load"}):w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"Agent Profile"})}),(0,r.jsx)("div",{className:"text-black text-3xl py-4 px-12 ".concat((null==w?void 0:null===(e=w.data)||void 0===e?void 0:e.fullname)?"":"hidden"),children:"".concat(null==w?void 0:null===(t=w.data)||void 0===t?void 0:t.fullname,"'s listings")}),(0,r.jsx)("div",{className:"w-full grid lg:grid-cols-3 md:grid-cols-2 max-md:grid-cols-1",children:null==w?void 0:null===(s=w.data)||void 0===s?void 0:null===(d=s.listings)||void 0===d?void 0:d.map(e=>(0,r.jsx)(u.Z,{data:e},e.id))}),x&&(0,r.jsx)(y,{addListing:k})]}):(0,r.jsx)("p",{children:"Loading..."})}},4205:function(e,t,s){"use strict";async function r(e,t){let s=await fetch(e,t);return s.json()}s.d(t,{_:function(){return r}})}},function(e){e.O(0,[866,279,734,774,888,179],function(){return e(e.s=8379)}),_N_E=e.O()}]);